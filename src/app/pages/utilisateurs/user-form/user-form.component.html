<div class="user-form-card">
  <h2>{{ isEditMode ? 'Modifier l\'utilisateur' : 'Ajouter un utilisateur' }}</h2>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate>

    <div class="form-group">
      <label for="matricule">Matricule</label>
      <input id="matricule" type="text" formControlName="matricule" class="form-control">
      <div *ngIf="matricule?.invalid && (matricule?.dirty || matricule?.touched)" class="alert alert-danger">
        <div *ngIf="matricule?.errors?.['required']">Matricule requis.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" class="form-control">
      <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="alert alert-danger">
        <div *ngIf="email?.errors?.['required']">Email requis.</div>
        <div *ngIf="email?.errors?.['email']">Format d'email invalide.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="fullName">Nom complet</label>
      <input id="fullName" type="text" formControlName="fullName" class="form-control">
      <div *ngIf="fullName?.invalid && (fullName?.dirty || fullName?.touched)" class="alert alert-danger">
        <div *ngIf="fullName?.errors?.['required']">Nom complet requis.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="role">Rôle</label>
      <select id="role" formControlName="role" class="form-control">
        <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
      </select>
       <div *ngIf="role?.invalid && (role?.dirty || role?.touched)" class="alert alert-danger">
        <div *ngIf="role?.errors?.['required']">Rôle requis.</div>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">
        {{ isEditMode ? 'Mettre à jour' : 'Confirmer' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Annuler</button>
    </div>

  </form>
</div>
